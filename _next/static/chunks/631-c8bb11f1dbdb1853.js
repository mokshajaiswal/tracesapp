"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[631],{2501:(e,t,l)=>{l.d(t,{MapsProvider:()=>o,n:()=>c});var s=l(5155),a=l(2200),n=l(2115);let i=(0,n.createContext)(void 0),r=["places","geometry"];function o(e){let{children:t}=e,{isLoaded:l,loadError:n}=(0,a.RH)({googleMapsApiKey:"AIzaSyDKFpUFxl8pfNSbx0GlQhmvFaHePoBxhKs",libraries:r});return(0,s.jsx)(i.Provider,{value:{isLoaded:l,loadError:n},children:t})}function c(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useMaps must be used within a MapsProvider");return e}},3418:(e,t,l)=>{l.d(t,{J:()=>o,UserProvider:()=>r});var s=l(5155),a=l(2115);let n=(0,a.createContext)(void 0),i="globalUserName";function r(e){let{children:t}=e,[l,r]=(0,a.useState)("Adventurer");return(0,a.useEffect)(()=>{let e=localStorage.getItem(i);e&&r(e)},[]),(0,s.jsx)(n.Provider,{value:{userName:l,setUserName:e=>{localStorage.setItem(i,e),r(e)}},children:t})}function o(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},4631:(e,t,l)=>{l.d(t,{A:()=>K});var s=l(5155),a=l(2115),n=l(5695),i=l(760),r=l(8274),o=l(5169),c=l(6516),d=l(2919),u=l(7213),h=l(1066),x=l(9588),m=l(224),g=l(3578),p=l(4416),f=l(6766),b=l(6656),v=l(2200),w=l(2501),j=l(8706),y=l(3418),N=l(6341),k=l(8564),C=l(8293),A=l(5742);function P(e){let{destinationName:t,distance:l,isUserNear:n,onEnterAR:i,onOpenGoogleMaps:r}=e,o=(0,a.useRef)(n);return(0,a.useEffect)(()=>{n&&!o.current&&"vibrate"in navigator&&navigator.vibrate([450,100,450,100,250]),o.current=n},[n]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("style",{children:"@keyframes fill { from { width: 0%; } to { width: 100%; } } .animate-fill { animation: fill 4s linear forwards; }"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 z-20 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-6",children:[(0,s.jsxs)("div",{className:"relative mb-6",children:[(0,s.jsx)("div",{className:"absolute left-3 top-0 h-full w-px bg-gray-200"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"z-10 bg-white pr-2",children:(0,s.jsx)(N.A,{size:24,className:"text-blue-500"})}),(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"My Location"})]}),(0,s.jsx)("div",{className:"flex justify-end -my-2 mb-1 pl-10",children:(0,s.jsx)("span",{className:"bg-pink-100 text-pink-600 font-bold text-sm px-3 py-1 rounded-full",children:null===l?"Calculating...":l<12?"You've arrived!":"".concat((621371e-9*l).toFixed(1)," Miles")})}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"z-10 bg-white pr-2",children:(0,s.jsx)(k.A,{size:24,className:"text-pink-500"})}),(0,s.jsx)("span",{className:"font-bold text-lg",children:t})]})]}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mb-4 text-center",children:n?"Use AR to locate the Trace around you.":"Get closer to the Trace to enable AR."}),n?(0,s.jsxs)("button",{onClick:i,disabled:!n,className:"w-full relative font-bold py-3 rounded-lg transition-colors overflow-hidden bg-pink-500 text-white",children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 h-full bg-pink-600 animate-fill"}),(0,s.jsxs)("span",{className:"relative z-10 flex items-center justify-center gap-2",children:[(0,s.jsx)(C.A,{size:18}),"Entering AR..."]})]}):(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("button",{onClick:r,className:"flex-1 flex items-center justify-center gap-2 font-bold py-3 rounded-lg transition-colors bg-gray-200 text-gray-600 hover:bg-gray-300",children:[(0,s.jsx)(A.A,{size:18}),"Start"]}),(0,s.jsxs)("button",{disabled:!0,className:"flex-1 flex items-center justify-center gap-2 font-bold py-3 rounded-lg transition-colors disabled:bg-gray-200 disabled:text-gray-400",children:[(0,s.jsx)(C.A,{size:18}),"Enter AR"]})]})]})})]})}var S=l(6048);let z={width:"100%",height:"100%"};function L(e){let{trace:t,userLocation:l,distance:n,isNear:i,onClose:r,directions:o,onStartAr:c}=e,{isLoaded:d}=(0,w.n)(),{userName:u}=(0,y.J)(),[h,x]=(0,a.useState)(null),m=(0,a.useRef)(l||t.location),g=(0,S.hS)(t,u,b.QS),f={url:"data:image/svg+xml;charset=UTF-8,".concat(encodeURIComponent(g)),scaledSize:new window.google.maps.Size(40,40),anchor:new window.google.maps.Point(20,20)},j={url:"data:image/svg+xml;charset=UTF-8,".concat(encodeURIComponent('<svg width="24" height="24" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="40" fill="%234285F4" stroke="white" stroke-width="8"/></svg>')),scaledSize:new window.google.maps.Size(24,24),anchor:new window.google.maps.Point(12,12)};return(0,s.jsxs)("div",{className:"relative w-full h-full bg-white",children:[(0,s.jsx)("button",{onClick:()=>{h&&l&&h.panTo(l)},className:"absolute top-5 left-5 z-20 p-3 bg-white rounded-full shadow-lg hover:bg-gray-100 transition-colors",children:(0,s.jsx)(N.A,{size:24})}),(0,s.jsx)("button",{onClick:r,className:"absolute top-5 right-5 z-20 p-3 bg-white rounded-full shadow-lg hover:bg-gray-100 transition-colors",children:(0,s.jsx)(p.A,{size:24})}),(0,s.jsx)("div",{className:"absolute inset-0 z-0",children:d?(0,s.jsxs)(v.u6,{mapContainerStyle:z,center:m.current,zoom:16,onLoad:e=>x(e),onUnmount:()=>x(null),options:{disableDefaultUI:!0,zoomControl:!1,rotateControl:!1,gestureHandling:"greedy",keyboardShortcuts:!1},children:[(0,s.jsx)(v.X0,{position:t.location,icon:f,zIndex:10}),l&&(0,s.jsx)(v.X0,{position:l,icon:j,zIndex:5}),(0,s.jsx)(v.jl,{center:t.location,radius:12,options:{strokeColor:"#ff69b4",fillOpacity:.35,strokeWeight:2,fillColor:"#ff69b4"}}),o&&(0,s.jsx)(v.C,{directions:o,options:{suppressMarkers:!0,polylineOptions:{strokeColor:"#1a73e8",strokeWeight:5}}})]}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-200",children:"Loading Map..."})}),(0,s.jsx)(P,{destinationName:t.title,distance:n,isUserNear:i,onEnterAR:c,onOpenGoogleMaps:()=>{if(!t.location)return;let{lat:e,lng:l}=t.location,s="https://www.google.com/maps/dir/?api=1&destination=".concat(e,",").concat(l,"&travelmode=walking");window.open(s,"_blank","noopener,noreferrer")}})]})}function M(e){let{trace:t,onClose:l,onMessageFromAR:n}=e,i=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=()=>{var e;if(null==(e=i.current)?void 0:e.contentWindow){let e=t.isPrivate?"private":"public",l=b.QS.includes(t.author),s=t.attachments?Object.keys(t.attachments):[],a={traceTitle:t.title,traceType:e,isFriend:l,attachments:s,location:t.location};i.current.contentWindow.postMessage(a,window.location.origin)}},l=i.current;return l&&l.addEventListener("load",e),()=>{l&&l.removeEventListener("load",e)}},[t]),(0,a.useEffect)(()=>{let e=e=>{e.origin===window.location.origin&&n(e.data)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[n]),(0,s.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,s.jsx)("iframe",{ref:i,src:"ar.html",title:"AR Experience",className:"w-full h-full border-none",allow:"camera; microphone; xr-spatial-tracking; geolocation"}),(0,s.jsx)("button",{onClick:l,className:"absolute top-5 right-5 z-50 flex h-12 w-12 items-center justify-center rounded-full bg-black/50 text-white backdrop-blur-sm transition-transform hover:scale-110",children:(0,s.jsx)(p.A,{size:28})})]})}var E=l(7948),R=l(2461);function F(e){let{trace:t,onClose:l}=e,{unlockTrace:n}=(0,j.r)(),[i,r]=(0,a.useState)(null),[o,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1),[h,x]=(0,a.useState)(null),[m,g]=(0,a.useState)(!1),[p,f]=(0,a.useState)(!1),{width:b,height:w}=(0,R.A)(),y=(0,a.useRef)(!1);return((0,a.useEffect)(()=>{if(!t)return;let e=navigator.geolocation.watchPosition(e=>{let l={lat:e.coords.latitude,lng:e.coords.longitude};r(l);let s=t.location,a=google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(l),new google.maps.LatLng(s));c(a),u(a<=12)},e=>console.error("Error watching position:",e),{enableHighAccuracy:!0});return()=>navigator.geolocation.clearWatch(e)},[t]),(0,a.useEffect)(()=>{let e=null;return d&&!y.current&&(f(!0),y.current=!0,e=setTimeout(()=>{console.log("Auto-starting AR..."),g(!0)},4e3)),()=>{e&&clearTimeout(e)}},[d]),m)?(0,s.jsx)(M,{trace:t,onClose:()=>g(!1),onMessageFromAR:e=>{"AR_ACTIVITY_COMPLETE"===e&&(n(t.id),l())}}):(0,s.jsxs)(s.Fragment,{children:[p&&(0,s.jsx)(E.A,{width:b,height:w,recycle:!1,numberOfPieces:400,onConfettiComplete:()=>f(!1)}),i&&!h&&(0,s.jsx)(v.YK,{options:{destination:t.location,origin:i,travelMode:google.maps.TravelMode.WALKING},callback:(e,t)=>{"OK"===t&&e?x(e):console.error("Directions request failed due to ".concat(t))}}),(0,s.jsx)(L,{trace:t,userLocation:i,distance:o,isNear:d,onClose:l,directions:h,onStartAr:()=>g(!0)})]})}var I=l(1991),T=l(7558),U=l(5321),O=l(4932),q=l(3264);function B(){let{invalidate:e}=(0,I.C)();return(0,a.useEffect)(()=>{e()},[e]),null}function D(e){let{isPrivate:t,isFriend:l}=e,n=(0,a.useRef)(null),i=(0,a.useRef)(null),{camera:r}=(0,I.C)(),[o,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1),h="heart.glb";h=t?"heart.glb":l?"stargreen.glb":"staryellow.glb";let{scene:x}=(0,U.p)(h),m=(0,a.useMemo)(()=>{if(!x)return null;let e=x.clone(),t=new q.NRn().setFromObject(e),l=new q.Pq0;return t.getCenter(l),e.position.sub(l),e},[x]),g=(0,a.useRef)(new q.Pq0(0,2,45));return((0,I.D)((e,t)=>{if(!n.current||o||d||(n.current.rotation.y+=.6*t),d&&i.current){let e=r.position,t=g.current;e.lerp(t,.1),i.current.target.lerp(new q.Pq0(0,0,0),.1),i.current.update(),.01>e.distanceTo(t)&&u(!1)}}),m)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("group",{ref:n,rotation:[0,Math.PI,0],children:(0,s.jsx)("primitive",{object:m,scale:1.2})}),(0,s.jsx)(O.N,{ref:i,enabled:!0,enableZoom:!1,enablePan:!1,minPolarAngle:Math.PI/2-.1,maxPolarAngle:Math.PI/2+.1,onStart:()=>{c(!0),u(!1)},onEnd:()=>{c(!1),u(!0)}})]}):null}function H(e){let{isPrivate:t,isFriend:l}=e;return(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,s.jsxs)(T.Hl,{gl:{alpha:!0},camera:{position:[0,2,45],fov:50},children:[(0,s.jsx)("hemisphereLight",{args:[0xffffff,4473924,2.5]}),(0,s.jsx)("directionalLight",{position:[5,5,5],intensity:1.5}),(0,s.jsx)(a.Suspense,{fallback:null,children:(0,s.jsx)(D,{isPrivate:t,isFriend:l})}),(0,s.jsx)(B,{})]})})}function K(e){let{trace:t,onBack:l}=e,{isLoaded:p}=(0,w.n)(),[N,k]=(0,a.useState)(!1),{unlockedTraceIds:C}=(0,j.r)(),{userName:A}=(0,y.J)(),P=(0,n.useRouter)(),[z,L]=(0,a.useState)(null),[M,E]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=e=>{var t;(null==(t=e.state)?void 0:t.navigating)||k(!1)};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[]),(0,a.useEffect)(()=>{if(M){let e=setTimeout(()=>{E(!1)},4e3);return()=>clearTimeout(e)}},[M]);let R=C.includes(t.id),I="/tracesapp",T={image:{src:"".concat(I,"/attachment/image.png"),label:"Photos"},video:{src:"".concat(I,"/attachment/video.png"),label:"Videos"},audio:{src:"".concat(I,"/attachment/audio.png"),label:"Audio"},note:{src:"".concat(I,"/attachment/note.png"),label:"Notes"}},U=t.attachments?Object.keys(t.attachments):[],O=U.map(e=>T[e].label).join(" & ");return(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"flex-grow overflow-y-auto",children:[(0,s.jsxs)("header",{className:"flex justify-between items-center mb-4 px-4 pt-4",children:[(0,s.jsx)("button",{onClick:l,className:"p-2",children:(0,s.jsx)(o.A,{size:24})}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("button",{onClick:()=>E(!0),className:"p-2",children:(0,s.jsx)(c.A,{size:22})}),(0,s.jsx)(i.N,{children:M&&(0,s.jsx)(r.P.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2,ease:"easeOut"},className:"absolute top-full right-0 mt-2 w-64 bg-gray-800 text-white text-sm rounded-lg shadow-lg p-3 z-10",children:"In a fully working app we could generate a shareable link that can be sent across any social media app."})})]})]}),(0,s.jsx)("div",{className:"px-6 mb-4",children:(0,s.jsx)("div",{className:"rounded-3xl overflow-hidden ".concat(R?"h-48":"h-64 bg-pink-50"),children:R?(0,s.jsx)(H,{isPrivate:t.isPrivate||!1,isFriend:t.isFriend||!1}):p?(0,s.jsx)(v.u6,{mapContainerClassName:"w-full h-full",center:t.location,zoom:15,options:{disableDefaultUI:!0,gestureHandling:"none"},children:(0,s.jsx)(v.X0,{position:t.location,icon:{url:"data:image/svg+xml;charset=UTF-8,".concat(encodeURIComponent((0,S.hS)(t,A,b.QS))),scaledSize:new window.google.maps.Size(40,40)},options:{clickable:!1}})}):(0,s.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:(0,s.jsx)("p",{children:"Loading map..."})})})}),(0,s.jsxs)("div",{className:"px-6 pb-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-gray-600 pt-1",children:["By ",t.author]}),!R&&(0,s.jsx)("div",{className:"px-3 py-1 text-xs font-medium rounded-full border bg-gray-100 text-gray-800",children:t.distance})]}),(0,s.jsxs)("main",{className:"space-y-4 mt-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:t.title}),(0,s.jsx)("p",{className:"text-base text-gray-700 leading-relaxed",children:t.description}),t.hashtags&&t.hashtags.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:t.hashtags.map(e=>(0,s.jsx)("span",{className:"text-sm font-medium text-pink-600",children:e},e))})]}),R?(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h3",{className:"font-bold text-gray-800 mb-4",children:"Unlocked Attachments"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4",children:U.map(e=>{var l;let a=null==(l=t.attachments)?void 0:l[e];if(!a)return null;if("image"===e&&a.url){let l=a.url;return(0,s.jsx)("button",{onClick:()=>L({type:"image",url:l}),className:"relative w-full h-auto rounded-2xl overflow-hidden transition-transform hover:scale-105 aspect-square",children:(0,s.jsx)(f.default,{src:l,alt:t.title,fill:!0,style:{objectFit:"cover"}})},e)}if("video"===e&&a.url){let t=a.url;return(0,s.jsx)("button",{onClick:()=>L({type:"video",url:t}),className:"w-full h-auto rounded-2xl overflow-hidden transition-transform hover:scale-105 aspect-square bg-black",children:(0,s.jsx)("video",{src:t,className:"w-full h-full object-cover"})},e)}if("audio"===e&&a.url){let t=a.url;return(0,s.jsxs)("button",{onClick:()=>L({type:"audio",url:t}),className:"p-4 bg-gray-100 rounded-2xl text-left w-full transition-transform hover:scale-105 aspect-square flex flex-col justify-center",children:[(0,s.jsx)("p",{className:"font-bold",children:"Audio Clip"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Tap to play"})]},e)}if("note"===e&&a.content){let t=a.content;return(0,s.jsx)("button",{onClick:()=>L({type:"note",content:t}),className:"col-span-2 p-4 bg-blue-100 rounded-2xl border border-blue-200 text-left w-full transition-transform hover:scale-105 flex items-center",children:(0,s.jsxs)("blockquote",{className:"text-blue-800 italic",children:['"',t.substring(0,100),'..."']})},e)}return null})})]}):U.length>0&&(0,s.jsxs)("div",{className:"mt-8 p-4 bg-pink-50 border border-pink-200 rounded-2xl",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"font-bold text-gray-800",children:"You will Find"}),(0,s.jsx)("button",{className:"px-4 py-1.5 text-xs font-semibold bg-white rounded-full border border-pink-200 text-pink-800",children:"Sneak Peek"})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:[O," from this spot, start exploring and find the trace in AR to unlock the trace."]}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:U.map(e=>{var l;let a=null==(l=t.attachments)?void 0:l[e];if(!a)return null;let n=e=>{let{children:t,icon:l}=e;return(0,s.jsxs)("div",{className:"relative w-full h-auto rounded-2xl overflow-hidden aspect-square flex items-center justify-center bg-gray-200 pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute inset-0 filter blur-md scale-110",children:t}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center",children:(0,s.jsx)(l,{size:32,className:"text-white opacity-90"})}),(0,s.jsx)("div",{className:"absolute top-2 right-2 bg-black/50 p-1.5 rounded-full",children:(0,s.jsx)(d.A,{size:16,className:"text-white"})})]})};return"image"===e&&a.url?(0,s.jsx)(n,{icon:u.A,children:(0,s.jsx)(f.default,{src:a.url,alt:"Locked preview",fill:!0,style:{objectFit:"cover"}})},e):"video"===e&&a.url?(0,s.jsx)(n,{icon:h.A,children:(0,s.jsx)("video",{src:a.url,className:"w-full h-full object-cover"})},e):"audio"===e&&a.url?(0,s.jsx)(n,{icon:x.A,children:(0,s.jsx)("div",{className:"w-full h-full bg-pink-200"})},e):"note"===e&&a.content?(0,s.jsx)(n,{icon:m.A,children:(0,s.jsx)("div",{className:"p-4 bg-blue-100 w-full h-full flex items-center",children:(0,s.jsxs)("p",{className:"text-blue-800 italic",children:['"',a.content,'"']})})},e):null})})]})]})]}),(0,s.jsx)("div",{className:"flex-shrink-0 p-4 bg-white/80 backdrop-blur-sm border-t border-gray-200",children:R?(0,s.jsx)("button",{onClick:()=>{P.push("/explore")},className:"w-full flex items-center justify-center gap-2 bg-pink-500 text-white font-bold py-4 rounded-full shadow-lg hover:bg-pink-600 transition-colors",children:"Explore More Traces"}):(0,s.jsxs)("button",{onClick:()=>{k(!0),history.pushState({navigating:!0},"","#navigate")},className:"w-full flex items-center justify-center gap-2 bg-blue-500 text-white font-bold py-4 rounded-full shadow-lg hover:bg-blue-600 transition-colors",children:[(0,s.jsx)(g.A,{size:20}),"Start exploring"]})}),(0,s.jsx)(i.N,{children:N&&(0,s.jsx)(r.P.div,{className:"fixed inset-0 z-50 bg-white",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",ease:[.1,.1,.1,1],duration:.5},children:(0,s.jsx)(F,{trace:t,onClose:()=>history.back()})})}),(0,s.jsx)(i.N,{children:z&&(0,s.jsx)(W,{attachment:z,onClose:()=>L(null)})})]})}function W(e){let{attachment:t,onClose:l}=e;return(0,s.jsxs)(r.P.div,{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",onClick:l,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,s.jsxs)(r.P.div,{className:"relative max-w-3xl w-full bg-white rounded-2xl p-4 flex justify-center items-center",onClick:e=>e.stopPropagation(),initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:["image"===t.type&&(0,s.jsx)("div",{className:"relative max-h-[85vh]",children:(0,s.jsx)(f.default,{src:t.url,alt:"Expanded attachment",width:1200,height:1200,className:"object-contain w-auto h-auto max-h-[85vh] rounded-lg"})}),"video"===t.type&&(0,s.jsx)("video",{src:t.url,controls:!0,autoPlay:!0,className:"w-full h-auto max-h-[85vh] rounded-lg"}),"audio"===t.type&&(0,s.jsx)("div",{className:"p-4 w-full",children:(0,s.jsx)("audio",{src:t.url,controls:!0,autoPlay:!0,className:"w-full"})}),"note"===t.type&&(0,s.jsx)("div",{className:"p-8 bg-blue-50 rounded-lg",children:(0,s.jsxs)("blockquote",{className:"text-blue-800 text-xl italic",children:['"',t.content,'"']})})]}),(0,s.jsx)("button",{onClick:l,className:"absolute top-4 right-4 text-white p-2 rounded-full bg-black/50 hover:bg-black/75",children:(0,s.jsx)(p.A,{size:24})})]})}U.p.preload("heart.glb"),U.p.preload("stargreen.glb"),U.p.preload("staryellow.glb")},6048:(e,t,l)=>{l.d(t,{BO:()=>c,KL:()=>u,Yf:()=>d,hS:()=>o});let s="M12 2 L15.09 8.26 L 22 9.27 L 17 14.14 L 18.18 21.02 L 12 17.77 L 5.82 21.02 L 7 14.14 L 2 9.27 L 8.91 8.26 Z",a='<svg width="40" height="40" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="'.concat("M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z",'" fill="#f472b6" stroke="white" stroke-width="1"/></svg>'),n='<svg width="40" height="40" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="'.concat(s,'" fill="gold" stroke="white" stroke-width="1"/></svg>'),i='<svg width="40" height="40" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="'.concat(s,'" fill="#4ade80" stroke="white" stroke-width="1"/></svg>'),r='<svg width="40" height="40" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="'.concat(s,'" fill="#60a5fa" stroke="white" stroke-width="1"/></svg>');function o(e,t,l){if(e.isPrivate)return a;let s=e.author===t,o=l.includes(e.author);return s?n:o?i:r}function c(e){return null===e?"...":e>=10?"".concat(Math.round(e)," miles"):"".concat(e.toFixed(1)," miles")}function d(e,t){let l=(t.lat-e.lat)*(Math.PI/180),s=(t.lng-e.lng)*(Math.PI/180),a=Math.sin(l/2)*Math.sin(l/2)+Math.cos(e.lat*(Math.PI/180))*Math.cos(t.lat*(Math.PI/180))*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*3958.754641}function u(e){if(!e||0===Object.keys(e).length)return{attachmentIcons:[],totalAttachments:0};let t=Object.keys(e),l=t.length;return{attachmentIcons:t.slice(0,3),totalAttachments:l}}},6656:(e,t,l)=>{l.d(t,{QS:()=>a,Tf:()=>n,rV:()=>s});let s="myTraces",a=["Jim Halpert","Pam","Willow Paul","Dean Brown","Camilla Park"],n=[{id:1,author:"Pam",traceLogoUrl:"https://placehold.co/64x64/fecdd3/ef4444?text=\uD83D\uDCF8",title:"Grandma's Boating Spot",subtitle:"This place reminds me of every single summer day...",description:"You know, some places just hold a special kind of peace.",hashtags:["#peaceful","#sunset","#photography","#QuietSpot"],theme:"pink",location:{lat:52.515,lng:-8.53},markerSvg:'<svg width="40" height="40" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M50 0 L100 50 L50 100 L0 50 Z" fill="%23FF1493" stroke="white" stroke-width="5"/></svg>',isPrivate:!0,attachments:{image:{url:"https://images.unsplash.com/photo-1501862450374-c30a1a5b4528"},note:{content:"Remember to bring bug spray next time."}}}]},8706:(e,t,l)=>{l.d(t,{A:()=>i,r:()=>n});var s=l(2115);let a=(0,s.createContext)(void 0),n=()=>{let e=(0,s.useContext)(a);if(!e)throw Error("useAppShell must be used within an AppShellProvider");return e},i=a}}]);
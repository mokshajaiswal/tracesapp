(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[314],{62:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var a=s(5155);let l=(0,s(9946).A)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);var i=s(492),r=s(7580),n=s(6766),c=s(6048);function o(e,t){if(!e)return"";let s=e.split(" ");return s.length>t?s.slice(0,t).join(" ")+"...":e}function d(e){let{type:t}=e,s={image:"/attachment/image.png",video:"/attachment/video.png",audio:"/attachment/audio.png",note:"/attachment/note.png"}[t];return s?(0,a.jsx)(n.default,{src:"".concat("/tracesapp").concat(s),alt:"".concat(t," icon"),width:25,height:25,className:"object-contain drop-shadow pb-1"}):null}function x(e){let{onClick:t,title:s,subtitle:n,hashtags:x,distance:h,theme:m="pink",titleWordLimit:p,subtitleWordLimit:g,attachmentIcons:u=[],totalAttachments:f,author:j,isFriend:b}=e,v=p?o(s,p):s,w=g?o(n,g):n,y=(0,c.BO)(h),N={pink:{container:"bg-pink-50 border-pink-200",pill:"bg-white/80 border-pink-200 text-pink-800",hashtag:"bg-pink-100/80 text-pink-800"},blue:{container:"bg-blue-50 border-blue-200",pill:"bg-white/80 border-blue-200 text-blue-800",hashtag:"bg-blue-100/80 text-blue-800"},green:{container:"bg-green-50 border-green-200",pill:"bg-white/80 border-green-200 text-green-800",hashtag:"bg-green-100/80 text-green-800"},orange:{container:"bg-orange-50 border-orange-200",pill:"bg-white/80 border-orange-200 text-orange-800",hashtag:"bg-orange-100/80 text-orange-800"}},k=N[m]||N.pink;return(0,a.jsxs)("button",{onClick:t,className:"flex flex-col p-5 space-y-2 rounded-3xl border text-left ".concat(k.container),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("div",{className:"flex items-center h-[34px] ".concat(2!==f?"space-x-1.5":"w-10"),children:0===f?(0,a.jsx)(l,{size:20,className:"text-slate-500"}):2===f&&2===u.length?(0,a.jsx)("div",{className:"relative w-10 h-10 flex items-center justify-center",children:u.map((e,t)=>(0,a.jsx)("div",{className:"absolute transition-transform duration-300 \n                ".concat(0===t?"-rotate-[15deg] z-10 -translate-x-1.5":"rotate-[15deg] z-0 translate-x-1.5"),children:(0,a.jsx)(d,{type:e})},e))}):f>3?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-slate-600",children:f}),(0,a.jsx)(i.A,{size:16,className:"text-slate-500"})]}):u.map(e=>(0,a.jsx)(d,{type:e},e))}),"..."!==y&&(0,a.jsx)("div",{className:"px-3 py-1 text-xs font-medium rounded-full border ".concat(k.pill," -mr-2"),children:y})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-1 flex-grow mt-2",children:[j&&(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-500 mb-1",children:[(0,a.jsxs)("span",{children:["By ",j]}),b&&(0,a.jsx)(r.A,{size:14,className:"text-blue-500"})]}),(0,a.jsx)("h2",{className:"text-[1.05rem] font-bold text-slate-800 tracking-normal",children:v}),(0,a.jsx)("p",{className:"text-sm text-slate-500 leading-relaxed",children:w})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-4",children:x.slice(0,3).map(e=>(0,a.jsx)("span",{className:"inline-block px-2.5 py-1 text-xs font-semibold rounded-full ".concat(k.hashtag),children:e},e))})]})}},492:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]])},2870:(e,t,s)=>{Promise.resolve().then(s.bind(s,5042))},5042:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var a=s(5155),l=s(2115),i=s(5695),r=s(2200),n=s(2501),c=s(6766),o=s(6341);function d(e){let{userName:t,onRecenterClick:s}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(c.default,{src:"".concat("/tracesapp","/tracelogo.png"),alt:"Traces Logo",width:35,height:36,className:"rounded-full pt-1"}),(0,a.jsxs)("p",{className:"text-lg font-bold text-gray-800",children:["Hello ",t]})]}),(0,a.jsx)("button",{onClick:s,className:"p-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Recenter map to your location",children:(0,a.jsx)(o.A,{size:24,className:"text-gray-600"})})]})}var x=s(6874),h=s.n(x);let m=(0,s(9946).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function p(){return(0,a.jsx)(h(),{href:"/explore/all",children:(0,a.jsx)("div",{className:"flex items-center justify-center p-4 rounded-3xl border-2 border-dashed border-gray-300 bg-gray-50 hover:bg-gray-100 hover:border-gray-400 transition-all h-28",children:(0,a.jsxs)("div",{className:"text-center font-semibold text-gray-600",children:[(0,a.jsx)("p",{children:"View All"}),(0,a.jsx)(m,{className:"mx-auto mt-1",size:20})]})})})}var g=s(62),u=s(4631),f=s(6656),j=s(760),b=s(8274),v=s(8706),w=s(3418),y=s(6048);function N(){return(0,a.jsxs)("button",{className:"flex items-center gap-1 text-xs font-normal text-gray-600 hover:text-gray-900 transition-colors",children:[(0,a.jsx)("span",{children:"Know More"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-[1.1rem] h-[1.1rem] rounded-full bg-pink-200 border-2 border-white"}),(0,a.jsx)("div",{className:"w-[1.1rem] h-[1.1rem] rounded-full bg-blue-300 border-2 border-white -ml-2"}),(0,a.jsx)("div",{className:"w-[1.1rem] h-[1.1rem] rounded-full bg-green-200 border-2 border-white -ml-2"})]})]})}var k=s(4416);let L={width:"100%",height:"100%"},C={lat:52.668,lng:-8.6305};function S(){let{isLoaded:e}=(0,n.n)(),{userName:t}=(0,w.J)(),{scrollToTop:s,refreshId:o,unlockedTraceIds:x,userLocation:h}=(0,v.r)(),[m,k]=(0,l.useState)(null),[S,A]=(0,l.useState)(null),[M,_]=(0,l.useState)(!1),[B,E]=(0,l.useState)(!0),[T,F]=(0,l.useState)(!0),[P,I]=(0,l.useState)([]),O=(0,i.useSearchParams)(),[W,U]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=JSON.parse(localStorage.getItem(f.rV)||"[]");I([...f.Tf,...e])},[o]),(0,l.useEffect)(()=>{m&&h&&B&&m.panTo(h)},[m,h,B]),(0,l.useEffect)(()=>{if(P.length>0&&!S){let e=O.get("openTrace");if(e){let t=P.find(t=>t.id.toString()===e);t&&(F(!1),A(t))}}},[O,P,S]),(0,l.useEffect)(()=>{let e=e=>{var t;(null==(t=e.state)?void 0:t.traceId)||A(null)};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[]);let Y=e=>{F(!0),A(e),history.pushState({traceId:e.id},"","?openTrace=".concat(e.id))},R=(0,l.useCallback)(e=>{k(e),h?e.setCenter(h):e.setCenter(C)},[h]),q=(0,l.useMemo)(()=>P.filter(e=>!x.includes(e.id)&&e.author!==t).sort((e,t)=>(h?(0,y.Yf)(h,e.location):0)-(h?(0,y.Yf)(h,t.location):0)),[P,x,h,t]),D=e=>{let s=h?(0,y.Yf)(h,e.location):null,{attachmentIcons:l,totalAttachments:i}=(0,y.KL)(e.attachments),r=e.author===t,n=f.QS.includes(e.author),c="blue";return r?c="orange":e.isPrivate?c="pink":n&&(c="green"),(0,a.jsx)(g.A,{onClick:()=>Y(e),title:e.title,subtitle:e.description?e.description.substring(0,100):"",hashtags:e.hashtags||[],distance:s,titleWordLimit:4,subtitleWordLimit:8,author:e.author,attachmentIcons:l,totalAttachments:i,theme:c,isFriend:n},e.id)},H=q.filter((e,t)=>t%2==0),Q=q.filter((e,t)=>t%2!=0);return(0,a.jsxs)("div",{className:"relative overflow-x-hidden",children:[(0,a.jsx)("div",{className:"relative z-10 bg-white shadow-[0_5px_15px_rgba(0,0,0,0.08)] rounded-b-3xl px-4 py-3 overflow-x-hidden",children:(0,a.jsx)(d,{userName:t,onRecenterClick:()=>{m&&h&&(m.panTo(h),E(!0))}})}),(0,a.jsx)("div",{className:"-mt-6 transition-all duration-300 ease-in-out ".concat(M?"h-[65vh]":"h-[40vh]"),children:e&&(0,a.jsxs)(r.u6,{mapContainerStyle:L,zoom:18,options:{disableDefaultUI:!0,zoomControl:!1},onLoad:R,onDragStart:()=>{_(!0),E(!1),s()},onDragEnd:()=>{_(!1)},children:[q.map(e=>{let s=(0,y.hS)(e,t,f.QS);return(0,a.jsx)(r.X0,{position:e.location,onClick:()=>Y(e),icon:{url:"data:image/svg+xml;charset=UTF-8,".concat(encodeURIComponent(s)),scaledSize:new window.google.maps.Size(40,40)}},e.id)}),h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.T$,{center:h,radius:10,options:{strokeColor:"#4285F4",strokeOpacity:.8,strokeWeight:2,fillColor:"#4285F4",fillOpacity:.2}}),(0,a.jsx)(r.X0,{position:h,icon:{url:"data:image/svg+xml;charset=UTF-8,".concat(encodeURIComponent('<svg width="24" height="24" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="40" fill="%234285F4" stroke="white" stroke-width="8"/></svg>')),scaledSize:new window.google.maps.Size(24,24),anchor:new window.google.maps.Point(12,12)}})]})]})}),(0,a.jsxs)("div",{className:"relative bg-white p-4 rounded-t-3xl -mt-6 shadow-[0_-5px_15px_rgba(0,0,0,0.1)] overflow-x-hidden",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center px-3 mt-2 mb-6",children:[(0,a.jsx)(c.default,{src:"".concat("/tracesapp","/title.svg"),alt:"Traces Near You Title",width:135,height:14}),(0,a.jsx)("div",{onClick:()=>U(!0),children:(0,a.jsx)(N,{})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)("div",{className:"flex flex-col space-y-4",children:H.map(D)}),(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsx)(p,{}),Q.map(D)]})]})]}),(0,a.jsx)(j.N,{children:S&&(()=>{let e=h?(0,y.Yf)(h,S.location):null,t=f.QS.includes(S.author),s={...S,distance:(0,y.BO)(e),isFriend:t};return(0,a.jsx)(b.P.div,{className:"fixed inset-0 z-50 bg-white",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",ease:[.1,.1,.1,1],duration:.5*!!T},children:(0,a.jsx)(u.A,{trace:s,onBack:()=>history.back()})})})()}),(0,a.jsx)(j.N,{children:W&&(0,a.jsx)(z,{onClose:()=>U(!1)})})]})}function z(e){let{onClose:t}=e;return(0,a.jsx)(b.P.div,{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",onClick:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsxs)(b.P.div,{className:"relative w-full max-w-sm bg-white rounded-2xl p-6 text-center",onClick:e=>e.stopPropagation(),initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:300,damping:25},children:[(0,a.jsx)("button",{onClick:t,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(k.A,{size:24})}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Icon Legend"}),(0,a.jsxs)("div",{className:"space-y-6 text-left",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-10 h-10",children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M12 2 L15.09 8.26 L 22 9.27 L 17 14.14 L 18.18 21.02 L 12 17.77 L 5.82 21.02 L 7 14.14 L 2 9.27 L 8.91 8.26 Z",fill:"#10B981",stroke:"white",strokeWidth:"1"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900",children:"Green Star"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"A public trace by one of your friends, visible to everyone."})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-10 h-10",children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z",fill:"#EC4899",stroke:"white",strokeWidth:"1"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900",children:"Pink Heart"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"A private trace which is only visible to friends."})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-10 h-10",children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M12 2 L15.09 8.26 L 22 9.27 L 17 14.14 L 18.18 21.02 L 12 17.77 L 5.82 21.02 L 7 14.14 L 2 9.27 L 8.91 8.26 Z",fill:"#3B82F6",stroke:"white",strokeWidth:"1"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900",children:"Blue Star"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"A public trace left from people around the world."})]})]})]})]})})}},7580:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])}},e=>{e.O(0,[84,831,367,413,117,966,874,631,441,964,358],()=>e(e.s=2870)),_N_E=e.O()}]);
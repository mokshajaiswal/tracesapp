(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[403],{62:(e,t,a)=>{"use strict";a.d(t,{A:()=>x});var s=a(5155);let l=(0,a(9946).A)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);var r=a(492),i=a(7580),n=a(6766),c=a(6048);function o(e,t){if(!e)return"";let a=e.split(" ");return a.length>t?a.slice(0,t).join(" ")+"...":e}function d(e){let{type:t}=e,a={image:"/attachment/image.png",video:"/attachment/video.png",audio:"/attachment/audio.png",note:"/attachment/note.png"}[t];return a?(0,s.jsx)(n.default,{src:a,alt:"".concat(t," icon"),width:25,height:25,className:"object-contain drop-shadow pb-1"}):null}function x(e){let{onClick:t,title:a,subtitle:n,hashtags:x,distance:h,theme:u="pink",titleWordLimit:p,subtitleWordLimit:m,attachmentIcons:b=[],totalAttachments:g,author:f,isFriend:j}=e,v=p?o(a,p):a,y=m?o(n,m):n,k=(0,c.BO)(h),N={pink:{container:"bg-pink-50 border-pink-200",pill:"bg-white/80 border-pink-200 text-pink-800",hashtag:"bg-pink-100/80 text-pink-800"},blue:{container:"bg-blue-50 border-blue-200",pill:"bg-white/80 border-blue-200 text-blue-800",hashtag:"bg-blue-100/80 text-blue-800"},green:{container:"bg-green-50 border-green-200",pill:"bg-white/80 border-green-200 text-green-800",hashtag:"bg-green-100/80 text-green-800"},orange:{container:"bg-orange-50 border-orange-200",pill:"bg-white/80 border-orange-200 text-orange-800",hashtag:"bg-orange-100/80 text-orange-800"}},w=N[u]||N.pink;return(0,s.jsxs)("button",{onClick:t,className:"flex flex-col p-5 space-y-2 rounded-3xl border text-left ".concat(w.container),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("div",{className:"flex items-center h-[34px] ".concat(2!==g?"space-x-1.5":"w-10"),children:0===g?(0,s.jsx)(l,{size:20,className:"text-slate-500"}):2===g&&2===b.length?(0,s.jsx)("div",{className:"relative w-10 h-10 flex items-center justify-center",children:b.map((e,t)=>(0,s.jsx)("div",{className:"absolute transition-transform duration-300 \n                ".concat(0===t?"-rotate-[15deg] z-10 -translate-x-1.5":"rotate-[15deg] z-0 translate-x-1.5"),children:(0,s.jsx)(d,{type:e})},e))}):g>3?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-sm font-semibold text-slate-600",children:g}),(0,s.jsx)(r.A,{size:16,className:"text-slate-500"})]}):b.map(e=>(0,s.jsx)(d,{type:e},e))}),"..."!==k&&(0,s.jsx)("div",{className:"px-3 py-1 text-xs font-medium rounded-full border ".concat(w.pill," -mr-2"),children:k})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-1 flex-grow mt-2",children:[f&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-500 mb-1",children:[(0,s.jsxs)("span",{children:["By ",f]}),j&&(0,s.jsx)(i.A,{size:14,className:"text-blue-500"})]}),(0,s.jsx)("h2",{className:"text-lg font-bold text-slate-800 tracking-tight",children:v}),(0,s.jsx)("p",{className:"text-sm text-slate-500 leading-relaxed",children:y})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-4",children:x.slice(0,3).map(e=>(0,s.jsx)("span",{className:"inline-block px-2.5 py-1 text-xs font-semibold rounded-full ".concat(w.hashtag),children:e},e))})]})}},492:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]])},6713:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(5155),l=a(2115),r=a(6656),i=a(62),n=a(8706),c=a(8274),o=a(760),d=a(4631),x=a(3418),h=a(6048);let u=[{id:"private_traces",label:"From Friends"},{id:"your_traces",label:"My Traces"}];function p(e){let{activeTab:t,setActiveTab:a}=e;return(0,s.jsx)("div",{className:"flex border-b border-gray-200",children:u.map(e=>(0,s.jsxs)("button",{onClick:()=>a(e.id),className:"".concat(t===e.id?"":"hover:text-gray-700"," relative w-1/2 py-2 text-base font-medium transition text-center focus-visible:outline-2"),children:[t===e.id&&(0,s.jsx)(c.P.span,{layoutId:"bubble",className:"absolute inset-0 border-b-2 border-pink-500",transition:{type:"spring",bounce:.2,duration:.6}}),(0,s.jsx)("span",{className:"relative ".concat(t===e.id?"text-gray-900 font-bold":"text-gray-500"),children:e.label})]},e.id))})}function m(){let[e,t]=(0,l.useState)([]),{userName:a}=(0,x.J)(),{refreshId:m,userLocation:b}=(0,n.r)(),[g,f]=(0,l.useState)(null),[j,v]=(0,l.useState)(u[0].id);(0,l.useEffect)(()=>{let e=JSON.parse(localStorage.getItem(r.rV)||"[]");t([...r.Tf,...e])},[m]);let y=(0,l.useMemo)(()=>"private_traces"===j?e.filter(e=>r.QS.includes(e.author)&&e.author!==a):e.filter(e=>e.author===a),[j,e,a]),k=e=>{let t=b?(0,h.Yf)(b,e.location):null,{attachmentIcons:l,totalAttachments:n}=(0,h.KL)(e.attachments),c=e.author===a,o=r.QS.includes(e.author),d="blue";return c?d="orange":e.isPrivate?d="pink":o&&(d="green"),(0,s.jsx)(i.A,{onClick:()=>{f(e)},title:e.title,subtitle:e.description?e.description.substring(0,100):"",hashtags:e.hashtags||[],distance:t,theme:d,attachmentIcons:l,totalAttachments:n,author:e.author,isFriend:o},e.id)};return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"p-4 bg-white",children:[(0,s.jsx)("div",{className:"mb-6 mt-4",children:(0,s.jsx)(p,{activeTab:j,setActiveTab:v})}),"private_traces"===j?(()=>{let e=y.filter((e,t)=>t%2==0),t=y.filter((e,t)=>t%2!=0);return(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("div",{className:"flex w-1/2 flex-col space-y-4",children:e.map(k)}),(0,s.jsx)("div",{className:"flex w-1/2 flex-col space-y-4",children:t.map(k)})]})})():(0,s.jsx)("div",{className:"flex flex-col space-y-4",children:y.map(k)})]}),(0,s.jsx)(o.N,{children:g&&(()=>{let e=b?(0,h.Yf)(b,g.location):null,t=r.QS.includes(g.author),a={...g,distance:(0,h.BO)(e),isFriend:t};return(0,s.jsx)(c.P.div,{className:"fixed inset-0 z-50 bg-white overflow-y-auto",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",ease:[.1,.1,.1,1],duration:.5},children:(0,s.jsx)(d.A,{trace:a,onBack:()=>f(null)})})})()})]})}},7580:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},9317:(e,t,a)=>{Promise.resolve().then(a.bind(a,6713))}},e=>{e.O(0,[84,831,367,413,117,966,631,441,964,358],()=>e(e.s=9317)),_N_E=e.O()}]);